{"version":3,"sources":["../../src/core/utils.js"],"names":["recognizeModifierTiming","string","r","arr","res","exec","push","value","momentKey","calcRate","rate","total","amount","mod","substr","length","slice","parseFloat","toFixed","humanParseDiff","secs","hours","Math","floor","minutes","seconds","inPeriod","start","stop","fstart","fstop","console","log","isBetween","getSeconds","diff"],"mappings":"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","file":"utils.js","sourcesContent":["import moment from 'moment';\n\nexport const recognizeModifierTiming = function(string) {\n    let r = /(\\d{1,})([hms])/g;\n    let arr;\n    let res = [];\n    while ((arr = r.exec(string)) !== null) {\n        res.push({\n            value: arr[1],\n            momentKey: arr[2]\n        });\n    }\n\n    return res;\n};\n\nexport const calcRate = function(rate, total) {\n    let amount;\n    let mod = rate.substr(rate.length - 1);\n    let value = rate.slice(0, rate.length - 1);\n\n    switch (mod) {\n        case 'h':\n            amount = total / 60 / 60 * parseFloat(value);\n            break;\n        case 'm':\n            amount = total / 60 * parseFloat(value);\n            break;\n        case 's':\n            amount = total * parseFloat(value);\n            break;\n    }\n\n    return amount.toFixed(2);\n};\n\nexport const humanParseDiff = function(secs) {\n    let hours = Math.floor(secs / 3600);\n    let minutes = Math.floor((secs - hours * 3600) / 60);\n    let seconds = secs - hours * 3600 - minutes * 60;\n    hours = hours == 0 ? '00h' : (hours < 10 ? '0' + hours : hours) + 'h';\n    minutes =\n        minutes == 0 && hours == ''\n            ? '00m'\n            : (minutes < 10 ? '0' + minutes : minutes) + 'm';\n    seconds = seconds == 0 ? '00s' : (seconds < 10 ? '0' + seconds : seconds) + 's';\n    return `${hours} ${minutes} ${seconds}`;\n};\n\nexport const inPeriod = function(start, stop, fstart, fstop) {\n    fstart = moment(fstart, 'YYYY/MM/DD');\n    fstop = moment(fstop, 'YYYY/MM/DD');\n\n    console.log('fstart', fstart);\n    console.log('fstop', fstop);\n\n    if (\n        moment(start).isBetween(fstart, fstop, null, '[]') &&\n        moment(stop).isBetween(fstart, fstop, null, '[]')\n    ) {\n        console.log('start', start);\n        console.log('stop', stop);\n        return { isBetween: true, start, stop };\n    }\n\n    if (\n        !moment(start).isBetween(fstart, fstop, null, '[]') &&\n        moment(stop).isBetween(fstart, fstop, null, '[]')\n    ) {\n        return { isBetween: true, start: fstart, stop };\n    }\n\n    if (\n        moment(start).isBetween(fstart, fstop, null, '[]') &&\n        !moment(stop).isBetween(fstart, fstop, null, '[]')\n    ) {\n        return { isBetween: true, start, stop: fstop };\n    }\n\n    return { isBetween: false, start, stop };\n};\n\nexport const getSeconds = ({ start, stop }) => {\n    if (stop) {\n        return moment(stop).diff(moment(start), 'seconds');\n    } else {\n        return moment().diff(moment(start), 'seconds');\n    }\n};\n"]}