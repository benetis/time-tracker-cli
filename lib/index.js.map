{"version":3,"sources":["../src/index.js"],"names":["config","name","tasks","pkg","notify","manager","EXEC","version","description","option","command","alias","action","key","Array","isArray","join","startTask","pauseTask","unpauseTask","stopTask","text","addDescription","stringTime","modifyTask","sumarize","search","rate","setInterval","getTime","process","stdout","write","moveCursor","options","format","toLowerCase","undefined","console","log","JSON","stringify","getTasksJson","start","end","getTasksMd","string","delete","value","configure","getConfig","parse","argv","updateDB","update","outputHelp","exit"],"mappings":"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","file":"index.js","sourcesContent":["import 'babel-polyfill'\n\nimport program from 'commander'\nimport updateNotifier from 'update-notifier'\nimport Configstore from 'configstore'\nimport pkg from '../package.json'\n\nimport Manager from './core/Manager'\nimport { humanParseDiff } from './core/utils'\nimport { outputVertical, cliError, outputConfig } from './core/output'\n\nimport autocomplete from './autocomplete'\n\nconst config = new Configstore(pkg.name, {\n    tasks:{},\n    config:{\n        'format.output': 'DD/MM'\n    }\n})\n\nupdateNotifier({ pkg }).notify()\n\nconst manager = new Manager(config)\nautocomplete(config)\n\n//Exec\nlet EXEC = false\n\nprogram\n    .version(pkg.version)\n    .description('Tiny time tracker for projects')\n    .option('--updateDB', 'Bool to update the db')\n\nprogram\n    .command('start <task_key> [description]')\n    .description('Start task with a description.')\n    .alias('s')\n    .action(function(key, description) {\n        description = (description) ? Array.isArray(description) ? description.join(' ') : description : null\n        manager.startTask(key, description)\n        EXEC = true\n    })\n\nprogram\n    .command('pause <task_key>')\n    .description('Pause task')\n    .alias('p')\n    .action(function(key) {\n        manager.pauseTask(key)\n        EXEC = true\n    })\n\nprogram\n    .command('unpause <task_key>')\n    .description('Unpause task')\n    .alias('up')\n    .action(function(key) {\n        manager.unpauseTask(key)\n        EXEC = true\n    })\n\n\nprogram\n    .command('finish <task_key> [description]')\n    .description('Stop task, you can add a description')\n    .alias('f')\n    .action(function(key, description) {\n        description = (description) ? Array.isArray(description) ? description.join(' ') : description : null\n        manager.stopTask(key, description)\n        EXEC = true\n    })\n\nprogram\n    .command('description <task_key> <descriptionText...>')\n    .description('Add description to your task.')\n    .alias('d')\n    .action(function(key, text) {\n        text = Array.isArray(text) ? text.join(' ') : text\n        manager.addDescription(key, text)\n        EXEC = true\n    })\n\nprogram\n    .command('add <task_key> <stringTime>')\n    .description('Adds time to a task. Example: \"1h2m3s\"')\n    .action(function(key, stringTime) {\n        manager.modifyTask('add', key, stringTime)\n        manager.sumarize(key, manager.search(key), false)\n        EXEC = true\n    })\n\nprogram\n    .command('subtract <task_key> <stringTime>')\n    .description('Subtract time to a task. Example: \"1h2m3s\"')\n    .alias('sub')\n    .action(function(key, stringTime) {\n        manager.modifyTask('subtract', key, stringTime)\n        manager.sumarize(key, manager.search(key), false)\n        EXEC = true\n    })\n\nprogram\n    .command('report [task_string] [rate]')\n    .description('Report time of the tasks, empty for select all tasks. Can pass a rate (1h).')\n    .alias('r')\n    .action(function(tasks, rate) {\n        tasks = (tasks) ? tasks : 'all'\n        manager.sumarize(tasks, rate)\n        EXEC = true\n    })\n\nprogram\n    .command('log <task_key>')\n    .description('Logs the time of the  task')\n    .alias('l')\n    .action(function(key) {\n        setInterval(() => {\n            let text = outputVertical('Task:', key, humanParseDiff(manager.getTime(key)))\n            process.stdout.write(text)\n            process.stdout.moveCursor(0,-2)\n        }, 1000)\n        EXEC = true\n    })\n\nprogram\n    .command('export [task_string]')\n    .description('Export the tasks in json (default) or md format')\n    .alias('e')\n    .option('-f --format [format]')\n    .option('-s --start [start date. Example: \"2017/05/28\"]')\n    .option('-e --end [end date. Example: \"2018/05/28\"]')\n    .action(function(key, options) {\n\t\tswitch (options.format ? options.format.toLowerCase() : undefined){\n\t\t\tcase \"json\": case undefined:\n\t\t\t\tconsole.log(JSON.stringify(manager.getTasksJson(key, options.start, options.end), null, 4))\n\t\t\t\tbreak\n\t\t\tcase \"markdown\": case \"md\":\n\t\t\t\tconsole.log(manager.getTasksMd(key, options.start, options.end))\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tconsole.log(\"Format not supported\")\n\t\t}\n        EXEC = true\n    })\n\nprogram\n    .command('delete [task_string]')\n    .description('Remove tasks from the list. Empty for select all tasks')\n    .alias('del')\n    .action(function(string) {\n        string = (string) ? string : 'all'\n        manager.delete(string)\n        EXEC = true\n    })\n\nprogram\n    .command('configure <key> <value>')\n    .description('Configure the value of the config passing a key')\n    .action(function(key, value) {\n        manager.configure(key, value)\n        EXEC = true\n    })\n\nprogram\n    .command('configuration')\n    .description('Output configuration')\n    .action(function(string) {\n        outputConfig(manager.getConfig())\n        EXEC = true\n    })\n\nprogram\n    .parse(process.argv)\n\n\nif (program.updateDB) {\n    manager.update()\n    EXEC = true\n}\n\nif (!EXEC) {\n    cliError('You must use a valid command.')\n    program.outputHelp()\n    process.exit(1)\n}\n"]}